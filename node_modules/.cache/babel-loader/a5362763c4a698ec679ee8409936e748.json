{"ast":null,"code":"import { g as getDocument } from '../shared/ssr-window.esm.mjs';\nimport { c as classesToSelector } from '../shared/classes-to-selector.mjs';\nimport { c as createElement, h as elementIndex, m as makeElementsArray } from '../shared/utils.mjs';\n\nfunction A11y(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    a11y: {\n      enabled: true,\n      notificationClass: 'swiper-notification',\n      prevSlideMessage: 'Previous slide',\n      nextSlideMessage: 'Next slide',\n      firstSlideMessage: 'This is the first slide',\n      lastSlideMessage: 'This is the last slide',\n      paginationBulletMessage: 'Go to slide {{index}}',\n      slideLabelMessage: '{{index}} / {{slidesLength}}',\n      containerMessage: null,\n      containerRoleDescriptionMessage: null,\n      containerRole: null,\n      itemRoleDescriptionMessage: null,\n      slideRole: 'group',\n      id: null,\n      scrollOnFocus: true\n    }\n  });\n  swiper.a11y = {\n    clicked: false\n  };\n  let liveRegion = null;\n  let preventFocusHandler;\n  let focusTargetSlideEl;\n  let visibilityChangedTimestamp = new Date().getTime();\n\n  function notify(message) {\n    const notification = liveRegion;\n    if (notification.length === 0) return;\n    notification.innerHTML = '';\n    notification.innerHTML = message;\n  }\n\n  function getRandomNumber(size) {\n    if (size === void 0) {\n      size = 16;\n    }\n\n    const randomChar = () => Math.round(16 * Math.random()).toString(16);\n\n    return 'x'.repeat(size).replace(/x/g, randomChar);\n  }\n\n  function makeElFocusable(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('tabIndex', '0');\n    });\n  }\n\n  function makeElNotFocusable(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('tabIndex', '-1');\n    });\n  }\n\n  function addElRole(el, role) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('role', role);\n    });\n  }\n\n  function addElRoleDescription(el, description) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-roledescription', description);\n    });\n  }\n\n  function addElControls(el, controls) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-controls', controls);\n    });\n  }\n\n  function addElLabel(el, label) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-label', label);\n    });\n  }\n\n  function addElId(el, id) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('id', id);\n    });\n  }\n\n  function addElLive(el, live) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-live', live);\n    });\n  }\n\n  function disableEl(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-disabled', true);\n    });\n  }\n\n  function enableEl(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-disabled', false);\n    });\n  }\n\n  function onEnterOrSpaceKey(e) {\n    if (e.keyCode !== 13 && e.keyCode !== 32) return;\n    const params = swiper.params.a11y;\n    const targetEl = e.target;\n\n    if (swiper.pagination && swiper.pagination.el && (targetEl === swiper.pagination.el || swiper.pagination.el.contains(e.target))) {\n      if (!e.target.matches(classesToSelector(swiper.params.pagination.bulletClass))) return;\n    }\n\n    if (swiper.navigation && swiper.navigation.prevEl && swiper.navigation.nextEl) {\n      const prevEls = makeElementsArray(swiper.navigation.prevEl);\n      const nextEls = makeElementsArray(swiper.navigation.nextEl);\n\n      if (nextEls.includes(targetEl)) {\n        if (!(swiper.isEnd && !swiper.params.loop)) {\n          swiper.slideNext();\n        }\n\n        if (swiper.isEnd) {\n          notify(params.lastSlideMessage);\n        } else {\n          notify(params.nextSlideMessage);\n        }\n      }\n\n      if (prevEls.includes(targetEl)) {\n        if (!(swiper.isBeginning && !swiper.params.loop)) {\n          swiper.slidePrev();\n        }\n\n        if (swiper.isBeginning) {\n          notify(params.firstSlideMessage);\n        } else {\n          notify(params.prevSlideMessage);\n        }\n      }\n    }\n\n    if (swiper.pagination && targetEl.matches(classesToSelector(swiper.params.pagination.bulletClass))) {\n      targetEl.click();\n    }\n  }\n\n  function updateNavigation() {\n    if (swiper.params.loop || swiper.params.rewind || !swiper.navigation) return;\n    const {\n      nextEl,\n      prevEl\n    } = swiper.navigation;\n\n    if (prevEl) {\n      if (swiper.isBeginning) {\n        disableEl(prevEl);\n        makeElNotFocusable(prevEl);\n      } else {\n        enableEl(prevEl);\n        makeElFocusable(prevEl);\n      }\n    }\n\n    if (nextEl) {\n      if (swiper.isEnd) {\n        disableEl(nextEl);\n        makeElNotFocusable(nextEl);\n      } else {\n        enableEl(nextEl);\n        makeElFocusable(nextEl);\n      }\n    }\n  }\n\n  function hasPagination() {\n    return swiper.pagination && swiper.pagination.bullets && swiper.pagination.bullets.length;\n  }\n\n  function hasClickablePagination() {\n    return hasPagination() && swiper.params.pagination.clickable;\n  }\n\n  function updatePagination() {\n    const params = swiper.params.a11y;\n    if (!hasPagination()) return;\n    swiper.pagination.bullets.forEach(bulletEl => {\n      if (swiper.params.pagination.clickable) {\n        makeElFocusable(bulletEl);\n\n        if (!swiper.params.pagination.renderBullet) {\n          addElRole(bulletEl, 'button');\n          addElLabel(bulletEl, params.paginationBulletMessage.replace(/\\{\\{index\\}\\}/, elementIndex(bulletEl) + 1));\n        }\n      }\n\n      if (bulletEl.matches(classesToSelector(swiper.params.pagination.bulletActiveClass))) {\n        bulletEl.setAttribute('aria-current', 'true');\n      } else {\n        bulletEl.removeAttribute('aria-current');\n      }\n    });\n  }\n\n  const initNavEl = (el, wrapperId, message) => {\n    makeElFocusable(el);\n\n    if (el.tagName !== 'BUTTON') {\n      addElRole(el, 'button');\n      el.addEventListener('keydown', onEnterOrSpaceKey);\n    }\n\n    addElLabel(el, message);\n    addElControls(el, wrapperId);\n  };\n\n  const handlePointerDown = e => {\n    if (focusTargetSlideEl && focusTargetSlideEl !== e.target && !focusTargetSlideEl.contains(e.target)) {\n      preventFocusHandler = true;\n    }\n\n    swiper.a11y.clicked = true;\n  };\n\n  const handlePointerUp = () => {\n    preventFocusHandler = false;\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        if (!swiper.destroyed) {\n          swiper.a11y.clicked = false;\n        }\n      });\n    });\n  };\n\n  const onVisibilityChange = e => {\n    visibilityChangedTimestamp = new Date().getTime();\n  };\n\n  const handleFocus = e => {\n    if (swiper.a11y.clicked || !swiper.params.a11y.scrollOnFocus) return;\n    if (new Date().getTime() - visibilityChangedTimestamp < 100) return;\n    const slideEl = e.target.closest(`.${swiper.params.slideClass}, swiper-slide`);\n    if (!slideEl || !swiper.slides.includes(slideEl)) return;\n    focusTargetSlideEl = slideEl;\n    const isActive = swiper.slides.indexOf(slideEl) === swiper.activeIndex;\n    const isVisible = swiper.params.watchSlidesProgress && swiper.visibleSlides && swiper.visibleSlides.includes(slideEl);\n    if (isActive || isVisible) return;\n    if (e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents) return;\n\n    if (swiper.isHorizontal()) {\n      swiper.el.scrollLeft = 0;\n    } else {\n      swiper.el.scrollTop = 0;\n    }\n\n    requestAnimationFrame(() => {\n      if (preventFocusHandler) return;\n\n      if (swiper.params.loop) {\n        swiper.slideToLoop(parseInt(slideEl.getAttribute('data-swiper-slide-index')), 0);\n      } else {\n        swiper.slideTo(swiper.slides.indexOf(slideEl), 0);\n      }\n\n      preventFocusHandler = false;\n    });\n  };\n\n  const initSlides = () => {\n    const params = swiper.params.a11y;\n\n    if (params.itemRoleDescriptionMessage) {\n      addElRoleDescription(swiper.slides, params.itemRoleDescriptionMessage);\n    }\n\n    if (params.slideRole) {\n      addElRole(swiper.slides, params.slideRole);\n    }\n\n    const slidesLength = swiper.slides.length;\n\n    if (params.slideLabelMessage) {\n      swiper.slides.forEach((slideEl, index) => {\n        const slideIndex = swiper.params.loop ? parseInt(slideEl.getAttribute('data-swiper-slide-index'), 10) : index;\n        const ariaLabelMessage = params.slideLabelMessage.replace(/\\{\\{index\\}\\}/, slideIndex + 1).replace(/\\{\\{slidesLength\\}\\}/, slidesLength);\n        addElLabel(slideEl, ariaLabelMessage);\n      });\n    }\n  };\n\n  const init = () => {\n    const params = swiper.params.a11y;\n    swiper.el.append(liveRegion); // Container\n\n    const containerEl = swiper.el;\n\n    if (params.containerRoleDescriptionMessage) {\n      addElRoleDescription(containerEl, params.containerRoleDescriptionMessage);\n    }\n\n    if (params.containerMessage) {\n      addElLabel(containerEl, params.containerMessage);\n    }\n\n    if (params.containerRole) {\n      addElRole(containerEl, params.containerRole);\n    } // Wrapper\n\n\n    const wrapperEl = swiper.wrapperEl;\n    const wrapperId = params.id || wrapperEl.getAttribute('id') || `swiper-wrapper-${getRandomNumber(16)}`;\n    const live = swiper.params.autoplay && swiper.params.autoplay.enabled ? 'off' : 'polite';\n    addElId(wrapperEl, wrapperId);\n    addElLive(wrapperEl, live); // Slide\n\n    initSlides(); // Navigation\n\n    let {\n      nextEl,\n      prevEl\n    } = swiper.navigation ? swiper.navigation : {};\n    nextEl = makeElementsArray(nextEl);\n    prevEl = makeElementsArray(prevEl);\n\n    if (nextEl) {\n      nextEl.forEach(el => initNavEl(el, wrapperId, params.nextSlideMessage));\n    }\n\n    if (prevEl) {\n      prevEl.forEach(el => initNavEl(el, wrapperId, params.prevSlideMessage));\n    } // Pagination\n\n\n    if (hasClickablePagination()) {\n      const paginationEl = makeElementsArray(swiper.pagination.el);\n      paginationEl.forEach(el => {\n        el.addEventListener('keydown', onEnterOrSpaceKey);\n      });\n    } // Tab focus\n\n\n    const document = getDocument();\n    document.addEventListener('visibilitychange', onVisibilityChange);\n    swiper.el.addEventListener('focus', handleFocus, true);\n    swiper.el.addEventListener('focus', handleFocus, true);\n    swiper.el.addEventListener('pointerdown', handlePointerDown, true);\n    swiper.el.addEventListener('pointerup', handlePointerUp, true);\n  };\n\n  function destroy() {\n    if (liveRegion) liveRegion.remove();\n    let {\n      nextEl,\n      prevEl\n    } = swiper.navigation ? swiper.navigation : {};\n    nextEl = makeElementsArray(nextEl);\n    prevEl = makeElementsArray(prevEl);\n\n    if (nextEl) {\n      nextEl.forEach(el => el.removeEventListener('keydown', onEnterOrSpaceKey));\n    }\n\n    if (prevEl) {\n      prevEl.forEach(el => el.removeEventListener('keydown', onEnterOrSpaceKey));\n    } // Pagination\n\n\n    if (hasClickablePagination()) {\n      const paginationEl = makeElementsArray(swiper.pagination.el);\n      paginationEl.forEach(el => {\n        el.removeEventListener('keydown', onEnterOrSpaceKey);\n      });\n    }\n\n    const document = getDocument();\n    document.removeEventListener('visibilitychange', onVisibilityChange); // Tab focus\n\n    if (swiper.el && typeof swiper.el !== 'string') {\n      swiper.el.removeEventListener('focus', handleFocus, true);\n      swiper.el.removeEventListener('pointerdown', handlePointerDown, true);\n      swiper.el.removeEventListener('pointerup', handlePointerUp, true);\n    }\n  }\n\n  on('beforeInit', () => {\n    liveRegion = createElement('span', swiper.params.a11y.notificationClass);\n    liveRegion.setAttribute('aria-live', 'assertive');\n    liveRegion.setAttribute('aria-atomic', 'true');\n  });\n  on('afterInit', () => {\n    if (!swiper.params.a11y.enabled) return;\n    init();\n  });\n  on('slidesLengthChange snapGridLengthChange slidesGridLengthChange', () => {\n    if (!swiper.params.a11y.enabled) return;\n    initSlides();\n  });\n  on('fromEdge toEdge afterInit lock unlock', () => {\n    if (!swiper.params.a11y.enabled) return;\n    updateNavigation();\n  });\n  on('paginationUpdate', () => {\n    if (!swiper.params.a11y.enabled) return;\n    updatePagination();\n  });\n  on('destroy', () => {\n    if (!swiper.params.a11y.enabled) return;\n    destroy();\n  });\n}\n\nexport { A11y as default };","map":{"version":3,"sources":["/Users/damodhardattareddylikki/Desktop/Damodhar_portfolio/portfolio/node_modules/swiper/modules/a11y.mjs"],"names":["g","getDocument","c","classesToSelector","createElement","h","elementIndex","m","makeElementsArray","A11y","_ref","swiper","extendParams","on","a11y","enabled","notificationClass","prevSlideMessage","nextSlideMessage","firstSlideMessage","lastSlideMessage","paginationBulletMessage","slideLabelMessage","containerMessage","containerRoleDescriptionMessage","containerRole","itemRoleDescriptionMessage","slideRole","id","scrollOnFocus","clicked","liveRegion","preventFocusHandler","focusTargetSlideEl","visibilityChangedTimestamp","Date","getTime","notify","message","notification","length","innerHTML","getRandomNumber","size","randomChar","Math","round","random","toString","repeat","replace","makeElFocusable","el","forEach","subEl","setAttribute","makeElNotFocusable","addElRole","role","addElRoleDescription","description","addElControls","controls","addElLabel","label","addElId","addElLive","live","disableEl","enableEl","onEnterOrSpaceKey","e","keyCode","params","targetEl","target","pagination","contains","matches","bulletClass","navigation","prevEl","nextEl","prevEls","nextEls","includes","isEnd","loop","slideNext","isBeginning","slidePrev","click","updateNavigation","rewind","hasPagination","bullets","hasClickablePagination","clickable","updatePagination","bulletEl","renderBullet","bulletActiveClass","removeAttribute","initNavEl","wrapperId","tagName","addEventListener","handlePointerDown","handlePointerUp","requestAnimationFrame","destroyed","onVisibilityChange","handleFocus","slideEl","closest","slideClass","slides","isActive","indexOf","activeIndex","isVisible","watchSlidesProgress","visibleSlides","sourceCapabilities","firesTouchEvents","isHorizontal","scrollLeft","scrollTop","slideToLoop","parseInt","getAttribute","slideTo","initSlides","slidesLength","index","slideIndex","ariaLabelMessage","init","append","containerEl","wrapperEl","autoplay","paginationEl","document","destroy","remove","removeEventListener","default"],"mappings":"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","sourcesContent":["import { g as getDocument } from '../shared/ssr-window.esm.mjs';\nimport { c as classesToSelector } from '../shared/classes-to-selector.mjs';\nimport { c as createElement, h as elementIndex, m as makeElementsArray } from '../shared/utils.mjs';\n\nfunction A11y(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    a11y: {\n      enabled: true,\n      notificationClass: 'swiper-notification',\n      prevSlideMessage: 'Previous slide',\n      nextSlideMessage: 'Next slide',\n      firstSlideMessage: 'This is the first slide',\n      lastSlideMessage: 'This is the last slide',\n      paginationBulletMessage: 'Go to slide {{index}}',\n      slideLabelMessage: '{{index}} / {{slidesLength}}',\n      containerMessage: null,\n      containerRoleDescriptionMessage: null,\n      containerRole: null,\n      itemRoleDescriptionMessage: null,\n      slideRole: 'group',\n      id: null,\n      scrollOnFocus: true\n    }\n  });\n  swiper.a11y = {\n    clicked: false\n  };\n  let liveRegion = null;\n  let preventFocusHandler;\n  let focusTargetSlideEl;\n  let visibilityChangedTimestamp = new Date().getTime();\n  function notify(message) {\n    const notification = liveRegion;\n    if (notification.length === 0) return;\n    notification.innerHTML = '';\n    notification.innerHTML = message;\n  }\n  function getRandomNumber(size) {\n    if (size === void 0) {\n      size = 16;\n    }\n    const randomChar = () => Math.round(16 * Math.random()).toString(16);\n    return 'x'.repeat(size).replace(/x/g, randomChar);\n  }\n  function makeElFocusable(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('tabIndex', '0');\n    });\n  }\n  function makeElNotFocusable(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('tabIndex', '-1');\n    });\n  }\n  function addElRole(el, role) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('role', role);\n    });\n  }\n  function addElRoleDescription(el, description) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-roledescription', description);\n    });\n  }\n  function addElControls(el, controls) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-controls', controls);\n    });\n  }\n  function addElLabel(el, label) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-label', label);\n    });\n  }\n  function addElId(el, id) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('id', id);\n    });\n  }\n  function addElLive(el, live) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-live', live);\n    });\n  }\n  function disableEl(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-disabled', true);\n    });\n  }\n  function enableEl(el) {\n    el = makeElementsArray(el);\n    el.forEach(subEl => {\n      subEl.setAttribute('aria-disabled', false);\n    });\n  }\n  function onEnterOrSpaceKey(e) {\n    if (e.keyCode !== 13 && e.keyCode !== 32) return;\n    const params = swiper.params.a11y;\n    const targetEl = e.target;\n    if (swiper.pagination && swiper.pagination.el && (targetEl === swiper.pagination.el || swiper.pagination.el.contains(e.target))) {\n      if (!e.target.matches(classesToSelector(swiper.params.pagination.bulletClass))) return;\n    }\n    if (swiper.navigation && swiper.navigation.prevEl && swiper.navigation.nextEl) {\n      const prevEls = makeElementsArray(swiper.navigation.prevEl);\n      const nextEls = makeElementsArray(swiper.navigation.nextEl);\n      if (nextEls.includes(targetEl)) {\n        if (!(swiper.isEnd && !swiper.params.loop)) {\n          swiper.slideNext();\n        }\n        if (swiper.isEnd) {\n          notify(params.lastSlideMessage);\n        } else {\n          notify(params.nextSlideMessage);\n        }\n      }\n      if (prevEls.includes(targetEl)) {\n        if (!(swiper.isBeginning && !swiper.params.loop)) {\n          swiper.slidePrev();\n        }\n        if (swiper.isBeginning) {\n          notify(params.firstSlideMessage);\n        } else {\n          notify(params.prevSlideMessage);\n        }\n      }\n    }\n    if (swiper.pagination && targetEl.matches(classesToSelector(swiper.params.pagination.bulletClass))) {\n      targetEl.click();\n    }\n  }\n  function updateNavigation() {\n    if (swiper.params.loop || swiper.params.rewind || !swiper.navigation) return;\n    const {\n      nextEl,\n      prevEl\n    } = swiper.navigation;\n    if (prevEl) {\n      if (swiper.isBeginning) {\n        disableEl(prevEl);\n        makeElNotFocusable(prevEl);\n      } else {\n        enableEl(prevEl);\n        makeElFocusable(prevEl);\n      }\n    }\n    if (nextEl) {\n      if (swiper.isEnd) {\n        disableEl(nextEl);\n        makeElNotFocusable(nextEl);\n      } else {\n        enableEl(nextEl);\n        makeElFocusable(nextEl);\n      }\n    }\n  }\n  function hasPagination() {\n    return swiper.pagination && swiper.pagination.bullets && swiper.pagination.bullets.length;\n  }\n  function hasClickablePagination() {\n    return hasPagination() && swiper.params.pagination.clickable;\n  }\n  function updatePagination() {\n    const params = swiper.params.a11y;\n    if (!hasPagination()) return;\n    swiper.pagination.bullets.forEach(bulletEl => {\n      if (swiper.params.pagination.clickable) {\n        makeElFocusable(bulletEl);\n        if (!swiper.params.pagination.renderBullet) {\n          addElRole(bulletEl, 'button');\n          addElLabel(bulletEl, params.paginationBulletMessage.replace(/\\{\\{index\\}\\}/, elementIndex(bulletEl) + 1));\n        }\n      }\n      if (bulletEl.matches(classesToSelector(swiper.params.pagination.bulletActiveClass))) {\n        bulletEl.setAttribute('aria-current', 'true');\n      } else {\n        bulletEl.removeAttribute('aria-current');\n      }\n    });\n  }\n  const initNavEl = (el, wrapperId, message) => {\n    makeElFocusable(el);\n    if (el.tagName !== 'BUTTON') {\n      addElRole(el, 'button');\n      el.addEventListener('keydown', onEnterOrSpaceKey);\n    }\n    addElLabel(el, message);\n    addElControls(el, wrapperId);\n  };\n  const handlePointerDown = e => {\n    if (focusTargetSlideEl && focusTargetSlideEl !== e.target && !focusTargetSlideEl.contains(e.target)) {\n      preventFocusHandler = true;\n    }\n    swiper.a11y.clicked = true;\n  };\n  const handlePointerUp = () => {\n    preventFocusHandler = false;\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        if (!swiper.destroyed) {\n          swiper.a11y.clicked = false;\n        }\n      });\n    });\n  };\n  const onVisibilityChange = e => {\n    visibilityChangedTimestamp = new Date().getTime();\n  };\n  const handleFocus = e => {\n    if (swiper.a11y.clicked || !swiper.params.a11y.scrollOnFocus) return;\n    if (new Date().getTime() - visibilityChangedTimestamp < 100) return;\n    const slideEl = e.target.closest(`.${swiper.params.slideClass}, swiper-slide`);\n    if (!slideEl || !swiper.slides.includes(slideEl)) return;\n    focusTargetSlideEl = slideEl;\n    const isActive = swiper.slides.indexOf(slideEl) === swiper.activeIndex;\n    const isVisible = swiper.params.watchSlidesProgress && swiper.visibleSlides && swiper.visibleSlides.includes(slideEl);\n    if (isActive || isVisible) return;\n    if (e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents) return;\n    if (swiper.isHorizontal()) {\n      swiper.el.scrollLeft = 0;\n    } else {\n      swiper.el.scrollTop = 0;\n    }\n    requestAnimationFrame(() => {\n      if (preventFocusHandler) return;\n      if (swiper.params.loop) {\n        swiper.slideToLoop(parseInt(slideEl.getAttribute('data-swiper-slide-index')), 0);\n      } else {\n        swiper.slideTo(swiper.slides.indexOf(slideEl), 0);\n      }\n      preventFocusHandler = false;\n    });\n  };\n  const initSlides = () => {\n    const params = swiper.params.a11y;\n    if (params.itemRoleDescriptionMessage) {\n      addElRoleDescription(swiper.slides, params.itemRoleDescriptionMessage);\n    }\n    if (params.slideRole) {\n      addElRole(swiper.slides, params.slideRole);\n    }\n    const slidesLength = swiper.slides.length;\n    if (params.slideLabelMessage) {\n      swiper.slides.forEach((slideEl, index) => {\n        const slideIndex = swiper.params.loop ? parseInt(slideEl.getAttribute('data-swiper-slide-index'), 10) : index;\n        const ariaLabelMessage = params.slideLabelMessage.replace(/\\{\\{index\\}\\}/, slideIndex + 1).replace(/\\{\\{slidesLength\\}\\}/, slidesLength);\n        addElLabel(slideEl, ariaLabelMessage);\n      });\n    }\n  };\n  const init = () => {\n    const params = swiper.params.a11y;\n    swiper.el.append(liveRegion);\n\n    // Container\n    const containerEl = swiper.el;\n    if (params.containerRoleDescriptionMessage) {\n      addElRoleDescription(containerEl, params.containerRoleDescriptionMessage);\n    }\n    if (params.containerMessage) {\n      addElLabel(containerEl, params.containerMessage);\n    }\n    if (params.containerRole) {\n      addElRole(containerEl, params.containerRole);\n    }\n\n    // Wrapper\n    const wrapperEl = swiper.wrapperEl;\n    const wrapperId = params.id || wrapperEl.getAttribute('id') || `swiper-wrapper-${getRandomNumber(16)}`;\n    const live = swiper.params.autoplay && swiper.params.autoplay.enabled ? 'off' : 'polite';\n    addElId(wrapperEl, wrapperId);\n    addElLive(wrapperEl, live);\n\n    // Slide\n    initSlides();\n\n    // Navigation\n    let {\n      nextEl,\n      prevEl\n    } = swiper.navigation ? swiper.navigation : {};\n    nextEl = makeElementsArray(nextEl);\n    prevEl = makeElementsArray(prevEl);\n    if (nextEl) {\n      nextEl.forEach(el => initNavEl(el, wrapperId, params.nextSlideMessage));\n    }\n    if (prevEl) {\n      prevEl.forEach(el => initNavEl(el, wrapperId, params.prevSlideMessage));\n    }\n\n    // Pagination\n    if (hasClickablePagination()) {\n      const paginationEl = makeElementsArray(swiper.pagination.el);\n      paginationEl.forEach(el => {\n        el.addEventListener('keydown', onEnterOrSpaceKey);\n      });\n    }\n\n    // Tab focus\n    const document = getDocument();\n    document.addEventListener('visibilitychange', onVisibilityChange);\n    swiper.el.addEventListener('focus', handleFocus, true);\n    swiper.el.addEventListener('focus', handleFocus, true);\n    swiper.el.addEventListener('pointerdown', handlePointerDown, true);\n    swiper.el.addEventListener('pointerup', handlePointerUp, true);\n  };\n  function destroy() {\n    if (liveRegion) liveRegion.remove();\n    let {\n      nextEl,\n      prevEl\n    } = swiper.navigation ? swiper.navigation : {};\n    nextEl = makeElementsArray(nextEl);\n    prevEl = makeElementsArray(prevEl);\n    if (nextEl) {\n      nextEl.forEach(el => el.removeEventListener('keydown', onEnterOrSpaceKey));\n    }\n    if (prevEl) {\n      prevEl.forEach(el => el.removeEventListener('keydown', onEnterOrSpaceKey));\n    }\n\n    // Pagination\n    if (hasClickablePagination()) {\n      const paginationEl = makeElementsArray(swiper.pagination.el);\n      paginationEl.forEach(el => {\n        el.removeEventListener('keydown', onEnterOrSpaceKey);\n      });\n    }\n    const document = getDocument();\n    document.removeEventListener('visibilitychange', onVisibilityChange);\n    // Tab focus\n    if (swiper.el && typeof swiper.el !== 'string') {\n      swiper.el.removeEventListener('focus', handleFocus, true);\n      swiper.el.removeEventListener('pointerdown', handlePointerDown, true);\n      swiper.el.removeEventListener('pointerup', handlePointerUp, true);\n    }\n  }\n  on('beforeInit', () => {\n    liveRegion = createElement('span', swiper.params.a11y.notificationClass);\n    liveRegion.setAttribute('aria-live', 'assertive');\n    liveRegion.setAttribute('aria-atomic', 'true');\n  });\n  on('afterInit', () => {\n    if (!swiper.params.a11y.enabled) return;\n    init();\n  });\n  on('slidesLengthChange snapGridLengthChange slidesGridLengthChange', () => {\n    if (!swiper.params.a11y.enabled) return;\n    initSlides();\n  });\n  on('fromEdge toEdge afterInit lock unlock', () => {\n    if (!swiper.params.a11y.enabled) return;\n    updateNavigation();\n  });\n  on('paginationUpdate', () => {\n    if (!swiper.params.a11y.enabled) return;\n    updatePagination();\n  });\n  on('destroy', () => {\n    if (!swiper.params.a11y.enabled) return;\n    destroy();\n  });\n}\n\nexport { A11y as default };\n"]},"metadata":{},"sourceType":"module"}